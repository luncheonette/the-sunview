---
layout: base
---

<section>
  <p class="homepage-intro">
    <span class="h2">The Sunview Luncheonette</span> is a co-operative, a storefront on pause,
    a member-based social club, a sometimes microvenue for art, poetics, regionalism,
    mutual aid, and commoning. It floats above the second largest oil spill in US history, 
    down the street from an active EPA Superfund site. It is resistant to traditional forms of commerce,
    commodification, and to gentrification. It is above all, an &ldquo;approach,&rdquo; and
    least of all, an &ldquo;outcome.&rdquo; It is unknown. It is hopeful. It saves you a
    seat at the counter.
  </p>
</section>

{% comment %}Separate events into upcoming and past{% endcomment %}
{% assign all_events = site.posts | sort: 'event_date' | reverse %}
{% assign upcoming = '' | split: '' %}
{% assign past = '' | split: '' %}
{% assign today = 'now' | date: '%Y%m%d' %}

{% for event in all_events limit: 20 %}
  {% assign event_date = event.end_date | default: event.event_date | date: '%Y%m%d' %}
  {% if event_date >= today %}
    {% assign upcoming = upcoming | push: event %}
  {% else %}
    {% assign past = past | push: event %}
  {% endif %}
{% endfor %}

{% comment %}Combine: upcoming first (reversed to show soonest first), then past{% endcomment %}
{% assign upcoming_reversed = upcoming | reverse %}
{% assign sorted_events = upcoming_reversed | concat: past %}

<ul class="featured-posts posts-grid content-grid">
  {% for post in sorted_events %}
    {% comment %}Determine if event has passed{% endcomment %}
    {% assign post_date = post.end_date | default: post.event_date | date: '%Y%m%d' %}
    {% if post_date >= today %}
      {% assign event_status = 'upcoming' %}
    {% else %}
      {% assign event_status = 'past' %}
    {% endif %}

    <li class="post-preview grid-item {{ event_status }}">
      <a class="post-preview-link" href="{{ site.baseurl }}{{ post.url }}">
        {% if post.main_image %}
          <img src="{{ site.baseurl }}{{ post.main_image }}" />
        {% endif %}
        <h3>{{ post.title }}</h3>
        <p>
          {% if post.end_date %}
            {{ post.event_date | date: "%A %B %-d" }} - {{ post.end_date | date: "%A %B %-d, %Y" }}
          {% else %}
            {{ post.event_date | date: "%A %B %-d, %Y" }}
          {% endif %}
        </p>
      </a>
    </li>
  {% endfor %}
</ul>

<section class="email-signup">
  Sign up for general, occasional updates:
  <iframe src="https://embeds.beehiiv.com/cabde7be-00cb-4a00-8379-84e35c69b436?slim=true" data-test-id="beehiiv-embed" height="52" frameborder="0" scrolling="no" style="margin: 0; border-radius: 0px !important; background-color: transparent;"></iframe>
</section>
